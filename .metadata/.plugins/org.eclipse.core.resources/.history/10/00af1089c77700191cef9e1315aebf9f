package firsttestpackage;

import java.util.List;
import java.util.Scanner;
import java.util.concurrent.TimeUnit;

import org.openqa.selenium.By;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.interactions.Actions;
import org.openqa.selenium.support.ui.Select;
import org.testng.Assert;
import org.testng.annotations.AfterTest;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test;
public class NewTest {
	public String baseUrl = "https://mobile.iihr.res.in/user";
	public WebDriver driver ; 

	@BeforeTest
	public void lauchingBrowser(){
		System.out.println("launching chrome browser"); 
		driver = new ChromeDriver();
		driver.get(baseUrl);

	}	

	/*
	@Test
	public void verifyfunctionality1() throws InterruptedException {
		//driver.get(baseUrl);

		///////////////Login/////////////////////////////////////

		driver.findElement(By.xpath("//input[@id=\"edit-name\"]")).sendKeys("zolipetester");
		driver.findElement(By.xpath("//input[@id=\"edit-pass\"]")).sendKeys("tester");

		//////////////Captcha///////////////////////////////////

		Scanner sc = new Scanner(System.in);
		System.out.println("enter the captcha");
		String captcha = sc.nextLine();
		driver.findElement(By.xpath("//input[@id=\"edit-captcha-response\"]")).sendKeys(captcha);
		driver.findElement(By.xpath("//button[@id=\"edit-submit\"]")).click();
		driver.manage().window().maximize();


		///////////////General Indent//////////////////////////

		driver.findElement(By.xpath("//*[@id=\"block-menu-menu-iihrdashboard\"]/div[2]/ul/li[3]/span")).click();
		Actions act = new Actions(driver);
		WebElement menuHoverLink = driver.findElement(By.xpath("//*[@id=\"indent-management\"]"));
		act.moveToElement(menuHoverLink).perform();
		WebElement subHoverLink = driver.findElement(By.xpath("//*[@id=\"create-indent\"]"));
		act.moveToElement(subHoverLink).perform();  
		WebElement subLink1 = driver.findElement(By.cssSelector("a[href='/admin/general_indent_form']"));
		subLink1.click();

		////fill Subject///////

		driver.findElement(By.xpath("//input[@id=\"edit-subject\"]")).sendKeys("Test");

		////Upload Files///////

		driver.findElement(By.xpath("//input[@id=\"edit-rate-table-logo-upload\"]")).sendKeys("/home/zolipe/Desktop/sample.pdf");
		driver.findElement(By.xpath("//input[@id=\"edit-rate-table-logo-upload-button\"]")).click();

		driver.findElement(By.xpath("//input[@id=\"edit-rate-table-logo1-upload\"]")).sendKeys("/home/zolipe/Desktop/sample.pdf");
		driver.findElement(By.xpath("//input[@id=\"edit-rate-table-logo1-upload-button\"]")).click();

		driver.findElement(By.xpath("//input[@id=\"edit-rate-table-logo2-upload\"]")).sendKeys("/home/zolipe/Desktop/sample.pdf");
		driver.findElement(By.xpath("//input[@id=\"edit-rate-table-logo2-upload-button\"]")).click();

		driver.findElement(By.xpath("//input[@id=\"edit-submit\"]")).click();
		Thread.sleep(2000);

		////////////////NEW PAGE IN GENERAL INDENT//////////////////////

		driver.findElement(By.xpath("//div[@class=\"chosen-container chosen-container-single form-select required chosen-processed\"]")).click();
		List<WebElement> allSupervisor = driver.findElements(By.xpath("//ul[@class=\"chosen-results\"]//li"));
		int asv = allSupervisor.size();
		for(int i =0;i<asv;i++){
			String supervisor = allSupervisor.get(i).getText();
			if (supervisor.equals("Zolipe Tester 2")) {
				allSupervisor.get(i).click();
				break;		
			}		
		}
		driver.findElement(By.xpath("//input[@id=\"edit-submit\"]")).click();
		Thread.sleep(2000);

		///////////Vehicle Indents////////////////////////////////


		driver.findElement(By.xpath("//*[@id=\"block-menu-menu-iihrdashboard\"]/div[2]/ul/li[3]/span")).click();
		Actions act1 = new Actions(driver);
		WebElement menuHoverLink1 = driver.findElement(By.xpath("//*[@id=\"indent-management\"]"));
		act1.moveToElement(menuHoverLink1).perform();
		WebElement subsubHoverLink1 = driver.findElement(By.xpath("//*[@id=\"create-indent\"]"));
		act1.moveToElement(subsubHoverLink1).perform();
		WebElement sublink1 = driver.findElement(By.cssSelector("a[href='/admin/vehicle_indent_form']"));
		sublink1.click();

		////fill Subject and all details///////

		driver.findElement(By.xpath("//input[@id=\"edit-subject\"]")).sendKeys("Test");

		driver.findElement(By.xpath("//input[@id=\"edit-from\"]")).sendKeys("Bangalore");
		driver.findElement(By.xpath("//input[@id=\"edit-to\"]")).sendKeys("Mysore");

		driver.findElement(By.xpath("//input[@id=\"edit-date-datepicker-popup-0\"]")).sendKeys("31-05-2019");
		driver.findElement(By.xpath("//input[@id=\"edit-date--popup-1\"]")).sendKeys("14:48");
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		//Thread.sleep(2000);

		driver.findElement(By.xpath("//div[@id=\"edit_vehicle_type_chosen\"]")).click();
		List<WebElement> allVehicals   = driver.findElements(By.xpath("//ul[@class=\"chosen-results\"]//li"));
		int n = allVehicals.size();
		for (int i = 0; i < n; i++) {
			String vehicals = allVehicals.get(i).getText();
			if (vehicals.equals("Bus")) {
				allVehicals.get(i).click();
				break;

			}
		}

		////Upload Files///////

		driver.findElement(By.xpath("//input[@id=\"edit-rate-table-logo-upload\"]")).sendKeys("/home/zolipe/Desktop/sample.pdf");
		driver.findElement(By.xpath("//input[@id=\"edit-rate-table-logo-upload-button\"]")).click();

		driver.findElement(By.xpath("//input[@id=\"edit-rate-table-logo1-upload\"]")).sendKeys("/home/zolipe/Desktop/sample.pdf");
		driver.findElement(By.xpath("//input[@id=\"edit-rate-table-logo1-upload-button\"]")).click();

		driver.findElement(By.xpath("//input[@id=\"edit-rate-table-logo2-upload\"]")).sendKeys("/home/zolipe/Desktop/sample.pdf");
		driver.findElement(By.xpath("//input[@id=\"edit-rate-table-logo2-upload-button\"]")).click();

		driver.findElement(By.xpath("//input[@id=\"edit-submit\"]")).click();
		Thread.sleep(2000);


		////////////////NEW PAGE IN GENERAL INDENT//////////////////////

		driver.findElement(By.xpath("//div[@class=\"chosen-container chosen-container-single form-select required chosen-processed\"]")).click();
		List<WebElement> allSupervisor1 = driver.findElements(By.xpath("//ul[@class=\"chosen-results\"]//li"));
		int asv1 = allSupervisor1.size();
		for(int i =0;i<asv1;i++){
			String supervisor1 = allSupervisor1.get(i).getText();
			if (supervisor1.equals("Zolipe Tester 2")) {
				allSupervisor1.get(i).click();
				break;		
			}		
		}
		driver.findElement(By.xpath("//input[@id=\"edit-submit\"]")).click();
		Thread.sleep(2000);


		///////////Work Indents////////////////////////////////


		driver.findElement(By.xpath("//*[@id=\"block-menu-menu-iihrdashboard\"]/div[2]/ul/li[3]/span")).click();
		Actions act2 = new Actions(driver);
		WebElement menuHoverLink2 = driver.findElement(By.xpath("//*[@id=\"indent-management\"]"));
		act2.moveToElement(menuHoverLink2).perform();
		WebElement subsubHoverLink2 = driver.findElement(By.xpath("//*[@id=\"create-indent\"]"));
		act2.moveToElement(subsubHoverLink2).perform();
		WebElement sublink2 = driver.findElement(By.cssSelector("a[href='/admin/work_indent_form']"));
		sublink2.click();

		////fill Subject///////

		driver.findElement(By.xpath("//input[@id=\"edit-subject\"]")).sendKeys("Test");

		driver.findElement(By.xpath("//input[@id=\"edit-work-name\"]")).sendKeys("Worktest");

		driver.findElement(By.xpath("//input[@id=\"edit-work-location\"]")).sendKeys("testlocation");

		((JavascriptExecutor)driver).executeScript("window.scrollTo(0,700)");

		driver.findElement(By.xpath("//div[@id=\"edit_unit_chosen\"]")).click();
		List<WebElement> allunits = driver.findElements(By.xpath("//ul[@class=\"chosen-results\"]//li"));
		int totalUnits = allunits.size();
		for(int i = 0;i<totalUnits;i++){	
			String unit = allunits.get(i).getText();
			if (unit.equals("Civil")) {
				allunits.get(i).click();
				break;
			}

		}

		////Upload Files///////

		driver.findElement(By.xpath("//input[@id=\"edit-rate-table-logo-upload\"]")).sendKeys("/home/zolipe/Desktop/sample.pdf");
		driver.findElement(By.xpath("//input[@id=\"edit-rate-table-logo-upload-button\"]")).click();

		driver.findElement(By.xpath("//input[@id=\"edit-rate-table-logo1-upload\"]")).sendKeys("/home/zolipe/Desktop/sample.pdf");
		driver.findElement(By.xpath("//input[@id=\"edit-rate-table-logo1-upload-button\"]")).click();

		driver.findElement(By.xpath("//input[@id=\"edit-rate-table-logo2-upload\"]")).sendKeys("/home/zolipe/Desktop/sample.pdf");
		driver.findElement(By.xpath("//input[@id=\"edit-rate-table-logo2-upload-button\"]")).click();

		driver.findElement(By.xpath("//input[@id=\"edit-submit\"]")).click();


		////////////////NEW PAGE IN GENERAL INDENT//////////////////////

		driver.findElement(By.xpath("//div[@class=\"chosen-container chosen-container-single form-select required chosen-processed\"]")).click();
		List<WebElement> allSupervisor2 = driver.findElements(By.xpath("//ul[@class=\"chosen-results\"]//li"));
		int asv2 = allSupervisor2.size();
		for(int i =0;i<asv2;i++){
			String supervisor2 = allSupervisor2.get(i).getText();
			if (supervisor2.equals("Zolipe Tester 2")) {
				allSupervisor2.get(i).click();
				break;		
			}		
		}
		driver.findElement(By.xpath("//input[@id=\"edit-submit\"]")).click();
		Thread.sleep(5000);

		//////////////Logout/////////////////////////
		driver.findElement(By.cssSelector("a[href='/user/logout?current=admin/vehicle_indent_form']")).click();
	}
	 */

	@Test
	public void loginAsTester2(){
		driver.findElement(By.xpath("//input[@id=\"edit-name\"]")).sendKeys("zolipetester2");
		driver.findElement(By.xpath("//input[@id=\"edit-pass\"]")).sendKeys("tester");

		//////////////Captcha///////////////////////////////////

		Scanner sc = new Scanner(System.in);
		System.out.println("enter the captcha");
		String captcha = sc.nextLine();
		driver.findElement(By.xpath("//input[@id=\"edit-captcha-response\"]")).sendKeys(captcha);
		driver.findElement(By.xpath("//button[@id=\"edit-submit\"]")).click();
		driver.manage().window().maximize();

		driver.findElement(By.xpath("//*[@id=\"block-menu-menu-iihrdashboard\"]/div[2]/ul/li[3]/span")).click();
		System.out.println("1");	
		Actions act = new Actions(driver);
		WebElement menuHoverLink = driver.findElement(By.xpath("//*[@id=\"indent-management\"]"));
		act.moveToElement(menuHoverLink).perform();
		System.out.println("2");
		WebElement inboxlink = driver.findElement(By.cssSelector("a[href='/admin/indent_dashboard']"));
		inboxlink.click();


	}
	@AfterTest
	public void closeBrowser(){
		//driver.close();	 
	}


}
